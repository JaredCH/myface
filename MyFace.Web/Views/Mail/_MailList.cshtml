@model IEnumerable<MyFace.Web.Models.MailItemViewModel>
@{
    var highlightUnread = (ViewData["HighlightUnread"] as bool?) == true;
}
@if (!Model.Any())
{
    <div class="text-muted">No messages.</div>
}
else
{
    <table class="table table-sm">
        <thead>
            <tr>
                <th>Subject</th>
                <th>From</th>
                <th>To</th>
                <th>Sent</th>
                <th>Read</th>
            </tr>
        </thead>
        <tbody>
        @foreach (var item in Model)
        {
            var rowClass = highlightUnread && !item.ReadAt.HasValue ? "mail-unread" : string.Empty;
            <tr class="@rowClass">
                <td><a href="@Url.Action("View", "Mail", new { id = item.Id })">@item.Subject</a></td>
                <td>@item.From</td>
                <td>@item.To</td>
                <td>@item.SentAt?.ToLocalTime().ToString("g")</td>
                <td>@(item.ReadAt.HasValue ? item.ReadAt.Value.ToLocalTime().ToString("g") : "-")</td>
            </tr>
        }
        </tbody>
    </table>
}
