@model IReadOnlyList<MyFace.Core.Entities.ControlPanelAuditEntry>

<section class="cp-section">
    <h2>Audit Trail</h2>
    <p class="cp-subhead">Most recent @Model.Count entries (max 250). All times UTC.</p>
    <div class="cp-placeholder" style="padding:0; overflow-x:auto;">
        <table style="width:100%; border-collapse:collapse; font-size:0.9rem;">
            <thead>
                <tr>
                    <th style="text-align:left; padding:0.75rem; border-bottom:1px solid var(--border); text-transform:uppercase; letter-spacing:0.16em; font-size:0.7rem; color:var(--muted);">When</th>
                    <th style="text-align:left; padding:0.75rem; border-bottom:1px solid var(--border); text-transform:uppercase; letter-spacing:0.16em; font-size:0.7rem; color:var(--muted);">Actor</th>
                    <th style="text-align:left; padding:0.75rem; border-bottom:1px solid var(--border); text-transform:uppercase; letter-spacing:0.16em; font-size:0.7rem; color:var(--muted);">Role</th>
                    <th style="text-align:left; padding:0.75rem; border-bottom:1px solid var(--border); text-transform:uppercase; letter-spacing:0.16em; font-size:0.7rem; color:var(--muted);">Action</th>
                    <th style="text-align:left; padding:0.75rem; border-bottom:1px solid var(--border); text-transform:uppercase; letter-spacing:0.16em; font-size:0.7rem; color:var(--muted);">Target</th>
                    <th style="text-align:left; padding:0.75rem; border-bottom:1px solid var(--border); text-transform:uppercase; letter-spacing:0.16em; font-size:0.7rem; color:var(--muted);">Details</th>
                </tr>
            </thead>
            <tbody>
            @if (Model.Count == 0)
            {
                <tr>
                    <td colspan="6" style="padding:1rem; text-align:center; color:var(--text-muted,#94a3b8);">No audit entries yet.</td>
                </tr>
            }
            else
            {
                foreach (var entry in Model)
                {
                    <tr>
                        <td style="padding:0.65rem; border-bottom:1px solid var(--border); color:var(--fg);">@entry.CreatedAt.ToString("yyyy-MM-dd HH:mm:ss")</td>
                        <td style="padding:0.65rem; border-bottom:1px solid var(--border); color:var(--fg);">@(!string.IsNullOrEmpty(entry.ActorUsername) ? entry.ActorUsername : $"User #{entry.ActorUserId?.ToString() ?? "?"}")</td>
                        <td style="padding:0.65rem; border-bottom:1px solid var(--border); color:var(--fg);">@entry.ActorRole</td>
                        <td style="padding:0.65rem; border-bottom:1px solid var(--border); color:var(--fg);">@entry.Action</td>
                        <td style="padding:0.65rem; border-bottom:1px solid var(--border); color:var(--fg);">@entry.Target</td>
                        <td style="padding:0.65rem; border-bottom:1px solid var(--border); white-space:pre-wrap; color:var(--fg);">@entry.Details</td>
                    </tr>
                }
            }
            </tbody>
        </table>
    </div>
</section>
